@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
@using BIDV.Common
@using BIDV.Model
@using PagedList;
@using PagedList.Mvc;
@model IEnumerable<bidv__menu>
<div class="row">
    <div class="col-xs-12">
        <div class="box box-primary">
            <div class="box-header">
                <a href="/AdminMenu/Add" class="btn btn-default btn-primary pull-right">Thêm mới</a>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-xs-12">
                        <table class="table table-striped table-bordered" role="grid">
                            <thead>
                                <tr role="rowheader">
                                    <th>Tiêu đề</th>
                                    <th>URL</th>
                                    <th>Quyền hạn</th>
                                    <th>Sắp xếp</th>
                                    <th>Sửa</th>
                                    <th>Xóa</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr role="row">
                                    <td colspan="6" style="text-transform:uppercase;padding-left:10px;">
                                        @* Đối với thằng node gốc *@
                                        <b>MENU HEADER</b>
                                    </td>
                                </tr>

                                @{                                   
                                    var listHeaderItem = @Model.Where(a => a.position == 0 && a.parent == null);                                   
                                }

                                @foreach (var item in listHeaderItem)
                                {
                                    var listChildItem = @Model.Where(b => b.parent == @item.id);
                                    <tr role="row">
                                        <td style="text-transform:uppercase;padding-left:20px; font-weight:700;">@item.title</td>
                                        <td>@item.link</td>
                                        <td>--</td>
                                        <td>@item.weight</td>
                                        <td>
                                            <a class="btn btn-primary btn-bordered" href="@Url.Action("Edit", "AdminMenu", new { id = item.id })">
                                                <i class="glyphicon glyphicon-pencil"></i>
                                            </a>
                                        </td>
                                        <td>
                                            <a onclick="confirm.BeforDelete('/AdminMenu/Delete/@item.id')" class="btn btn-danger btn-bordered">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    foreach (var child in listChildItem)
                                    {
                                        <tr role="row">
                                            <td style="padding-left:30px;">@child.title</td>
                                            <td>@child.link</td>
                                            <td>--</td>
                                            <td>@child.weight</td>
                                            <td>
                                                <a class="btn btn-primary btn-bordered" href="@Url.Action("Edit", "AdminMenu", new { id = child.id })">
                                                    <i class="glyphicon glyphicon-pencil"></i>
                                                </a>
                                            </td>
                                            <td>
                                                <a onclick="confirm.BeforDelete('/AdminMenu/Delete/@child.id')" class="btn btn-danger btn-bordered">
                                                    <i class="glyphicon glyphicon-trash"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                }


                                <tr role="row">
                                    <td colspan="6" style="text-transform:uppercase;padding-left:10px;">
                                        @* Đối với thằng node gốc *@
                                        <b>MENU FOOTER</b>
                                    </td>
                                </tr>
                                @{
                                    var listFooterItem = @Model.Where(a => a.position == 1 && a.parent == null);
                                }
                                @foreach (var item in listFooterItem)
                                {
                                    var listChildItem = @Model.Where(b => b.parent == @item.id);
                                    <tr role="row">
                                        <td style="text-transform:uppercase;padding-left:20px; font-weight:700;">@item.title</td>
                                        <td>@item.link</td>
                                        <td>--</td>
                                        <td>@item.weight</td>
                                        <td>
                                            <a class="btn btn-primary btn-bordered" href="@Url.Action("Edit", "AdminMenu", new { id = item.id })">
                                                <i class="glyphicon glyphicon-pencil"></i>
                                            </a>
                                        </td>
                                        <td>
                                            <a onclick="confirm.BeforDelete('/AdminMenu/Delete/@item.id')" class="btn btn-danger btn-bordered">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    foreach (var child in listChildItem)
                                    {
                                        <tr role="row">
                                            <td style="padding-left:30px;">@child.title</td>
                                            <td>@child.link</td>
                                            <td>--</td>
                                            <td>@child.weight</td>
                                            <td>
                                                <a class="btn btn-primary btn-bordered" href="@Url.Action("Edit", "AdminMenu", new { id = child.id })">
                                                    <i class="glyphicon glyphicon-pencil"></i>
                                                </a>
                                            </td>
                                            <td>
                                                <a onclick="confirm.BeforDelete('/AdminMenu/Delete/@child.id')" class="btn btn-danger btn-bordered">
                                                    <i class="glyphicon glyphicon-trash"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                }
                                <tr role="row">
                                    <td colspan="6" style="text-transform:uppercase;padding-left:10px;">
                                        @* Đối với thằng node gốc *@
                                        <b>MENU HỆ THỐNG</b>
                                    </td>
                                </tr>
                                @{
                                    var listSystemItem = @Model.Where(a => a.position == 2 && a.parent == 0);
                                }
                                @foreach (var item in listSystemItem)
                                {
                                    var listChildItem = @Model.Where(b => b.parent == @item.id);
                                    <tr role="row">
                                        <td style="text-transform:uppercase;padding-left:20px; font-weight:700;">@item.title</td>
                                        <td>@item.link</td>
                                        <td>--</td>
                                        <td>@item.weight</td>
                                        <td>
                                            <a class="btn btn-primary btn-bordered" href="@Url.Action("Edit", "AdminMenu", new { id = item.id })">
                                                <i class="glyphicon glyphicon-pencil"></i>
                                            </a>
                                        </td>
                                        <td>
                                            <a onclick="confirm.BeforDelete('/AdminMenu/Delete/@item.id')" class="btn btn-danger btn-bordered">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    foreach (var child in listChildItem)
                                    {
                                        <tr role="row">
                                            <td style="padding-left:30px;">@child.title</td>
                                            <td>@child.link</td>
                                            <td>--</td>
                                            <td>@child.weight</td>
                                            <td>
                                                <a class="btn btn-primary btn-bordered" href="@Url.Action("Edit", "AdminMenu", new { id = child.id })">
                                                    <i class="glyphicon glyphicon-pencil"></i>
                                                </a>
                                            </td>
                                            <td>
                                                <a onclick="confirm.BeforDelete('/AdminMenu/Delete/@child.id')" class="btn btn-danger btn-bordered">
                                                    <i class="glyphicon glyphicon-trash"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () { });
</script>